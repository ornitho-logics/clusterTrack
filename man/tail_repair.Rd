% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/2_repair.R
\name{tail_repair}
\alias{tail_repair}
\title{Repair putative clusters by trimming track tails}
\usage{
tail_repair(ctdf)
}
\arguments{
\item{ctdf}{A \code{ctdf} object. Must contain \code{.id}, \code{timestamp}, \code{location}, and \code{.putative_cluster}.}
}
\value{
The input \code{ctdf}, invisibly, with \code{.putative_cluster} updated in-place.
}
\description{
Removes leading and trailing "tail" portions of each \code{.putative_cluster} based on self-crossings
of the within-cluster track. The intent is to keep only the locally revisited core of a cluster
and drop commuting legs at the both beginning and end.
}
\details{
If the track has any self-crossing steps, the kept "core" is defined as the contiguous block of
steps between the first and last crossing; all points outside this block are set to \code{NA} in
\code{.putative_cluster}. If a cluster has no self-crossings at all, the entire cluster is dropped
(all its points are set to \code{NA}).
}
