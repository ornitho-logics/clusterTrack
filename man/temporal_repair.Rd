% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/2_repair.R
\name{temporal_repair}
\alias{temporal_repair}
\title{Repair temporally overlapping putative clusters}
\usage{
temporal_repair(ctdf, trim = 0.01)
}
\arguments{
\item{ctdf}{A \code{ctdf} object. Must contain \code{timestamp} and \code{.putative_cluster}.}

\item{trim}{Numeric in \verb{[0, 0.5)}. Maximum fraction trimmed from each tail when
estimating each cluster's time domain. The effective trim per cluster is
\code{min(trim, 1 / n_i)} where \code{n_i} is the number of points in that cluster.}
}
\value{
The input \code{ctdf}, invisibly, with \code{.putative_cluster} updated in-place.
}
\description{
Merges \code{.putative_cluster} labels whose (trimmed) time domains overlap.
For each putative cluster, a time interval \verb{[lo, hi]} is estimated from the
\code{timestamp} distribution after trimming a small fraction from each tail to
reduce sensitivity to single-point temporal outliers. Any clusters with
overlapping intervals are merged (transitively) using connected components on
an overlap graph.
}
\details{
Clusters are merged using connected components of an \emph{interval overlap graph}:
an undirected graph with one vertex per \code{.putative_cluster}, and an edge
between two vertices  if their trimmed time intervals overlap.
}
